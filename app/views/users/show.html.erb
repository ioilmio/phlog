<%=render 'layouts/header'%>

<div class="row">
    <aside class="col-md-6 offset-md-1 rounded bg-light">
        
        <section class="user_info">
            <h1>
                <%= gravatar_for @user %>
                <%= @user.username %>
                <span>has <b> <%= @user.opinions.count %></b> opinions</span>
                <%= render 'follow_form' if user_signed_in? && !current_user%>
            </h1>
            <%= render 'stats'%>
        </section>

    </aside>
</div>

<div class="row">
    <div class="col-md p-3 mt-2 mx-auto rounded ">
    <%if current_user == @user%>
     <%= render 'opinions/form', opinion: @new_opinion %>
     <%end%>
        <% @user_opinion.each do |opinion| %>
        <div class="col-md-6 offset-md-3 mt-2 mb-2 bg-light p-4 rounded">
            <div class="card-body">
            <div class="mb-2">
                <%= gravatar_for opinion.user %>
                <%= opinion.user.username %>

            </div>
                <div class="d-flex justify-content-center">
                    <%= image_tag opinion.display_image if opinion.image.attached? %>
                </div>
                <div class="mt-2 text-center">
                    <%= opinion.content%>
                </div>
            </div>
        <div class="mt-2">
        <%= time_ago_in_words(opinion.created_at)%> ago
        </div>
            <%if current_user == @user%>
            <%= link_to 'Edit', edit_opinion_path(opinion), class:'btn btn-primary mr-2'%>
            <span><%= link_to 'Destroy', opinion, method: :delete, data: { confirm: 'Are you sure?' }, class:'btn btn-danger mr-2' %></span>
            <%end%>

        </div>
        <%end%>
    </div>
</div>